@model IEnumerable<Models.Entities.Department>  

@{  
    ViewData["Title"] = "Departments";  
}  

<div class="container-fluid vh-100">  
    <div class="row h-100">  
        <!-- Form Column -->  
        <div class="col-3 d-flex align-items-center">  
            <div class="w-100">  
                <h4>Add Department</h4>  
                <form asp-action="Create" method="post">  
                    <div class="mb-3">  
                        <label for="Name" class="form-label">Name</label>  
                        <input asp-for="@Model.First().Name" class="form-control" />  
                        <span asp-validation-for="@Model.First().Name" class="text-danger"></span>  
                    </div>  
                    <button type="submit"  class="btn btn-primary w-100">Add</button>  
                </form>  
            </div>  
        </div>  
        <!-- Table Column -->  
        <div class="col-9">  
            <h1>Departments</h1>  
            <table class="table">  
                <thead>  
                    <tr>  
                        <th>@Html.DisplayNameFor(model => model.First().Id)</th>  
                        <th>@Html.DisplayNameFor(model => model.First().Name)</th>  
                        <th></th>  
                    </tr>  
                </thead>  
                <tbody>  
                    @foreach (var item in Model)  
                    {  
                        <tr>  
                            <td>@item.Id</td>  
                            <td>@item.Name</td>  
                            <td>  
                                <button class="btn btn-sm btn-warning" data-bs-toggle="modal" data-bs-target="#editModal" data-id="@item.Id" data-name="@item.Name">Edit</button>  
                            </td>  
                        </tr>  
                    }  
                </tbody>  
            </table>  
        </div>  
    </div>  
</div>  

<!-- Edit Modal -->  
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">  
    <div class="modal-dialog">  
        <div class="modal-content">  
            <form id="editForm" method="post">  
                <div class="modal-header">  
                    <h5 class="modal-title" id="editModalLabel">Edit Department</h5>  
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>  
                </div>  
                <div class="modal-body">  
                    <input type="hidden" id="editId" name="Id" />  
                    <div class="mb-3">  
                        <label for="editName" class="form-label">Name</label>  
                        <input type="text" class="form-control" id="editName" name="Name" required />  
                    </div>  
                </div>  
                <div class="modal-footer">  
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>  
                    <button type="submit" class="btn btn-primary">Save changes</button>  
                </div>  
            </form>  
        </div>  
    </div>  
</div>  

@section Scripts {  
    <script>  
        var editModal = document.getElementById('editModal');  
        editModal.addEventListener('show.bs.modal', function (event) {  
            var button = event.relatedTarget;  
            var id = button.getAttribute('data-id');  
            var name = button.getAttribute('data-name');  
            document.getElementById('editId').value = id;  
            document.getElementById('editName').value = name;  
            document.getElementById('editForm').action = '/Departments/Edit/' + id;  
        });  
    </script>  
}
